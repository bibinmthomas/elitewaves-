<%- include("../partials/adminHeader") -%>
    <!-- ============================================================== -->
    <!-- End Topbar header -->
    <!-- ============================================================== -->
    <!-- ============================================================== -->
    <!-- Left Sidebar - style you can find in sidebar.scss  -->
    <!-- ============================================================== -->
    <%- include("../partials/adminSidebar") -%>
        <!-- ============================================================== -->
        <!-- End Left Sidebar - style you can find in sidebar.scss  -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Page wrapper  -->
        <!-- ============================================================== -->
        <div class="page-wrapper">
            <!-- ============================================================== -->
            <!-- Bread crumb and right sidebar toggle -->
            <!-- ============================================================== -->
            <div class="page-breadcrumb">
                <div class="row align-items-center">
                    <div class="col-5">
                        <h4 class="page-title">Products</h4>
                        <!-- <div class="d-flex align-items-center">
                            <nav aria-label="breadcrumb">
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="#">Home</a></li>
                                    <li class="breadcrumb-item active" aria-current="page">Library</li>
                                </ol>
                            </nav>
                        </div> -->
                    </div>
                    <div class="col-7">
                        <div class="text-end upgrade-btn">
                            <a href="/admin/add-product" class="btn btn-danger text-white">Add Products</a>
                        </div>
                    </div>
                </div>
            </div>
            <!-- ============================================================== -->
            <!-- End Bread crumb and right sidebar toggle -->
            <!-- ============================================================== -->
            <!-- ============================================================== -->
            <!-- Container fluid  -->
            <!-- ============================================================== -->
            <div class="container-fluid">
                <!-- ============================================================== -->
                <!-- Start Page Content -->
                <!-- ============================================================== -->
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body">
                                <h4 class="card-title">Products List</h4>
                                <!-- <h6 class="card-subtitle">Add <code>.table-hover</code> to enable a hover state on table
                                    rows within a <code>&lt;tbody&gt;</code>.</h6> -->
                            </div>
                            <div class="table-responsive">
                                <table id="products" class="table table-hover table-striped " style="table-layout: fixed;">
                                    <thead>
                                        <tr>
                                            <th scope="col">SI NO</th>
                                            <th scope="col">Game Name</th>
                                            <th scope="col">Platform</th>
                                            <th scope="col">Price</th>
                                            <th scope="col">Rating</th>
                                            <th scope="col">Genre</th>
                                            <th scope="col">Stock</th>
                                            <th scope="col">Image</th>
                                            <th scope="col">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <% if( products.length> 0){ %>
                                            <% for(let i=1;i <=products.length; i++){ %>
                                                <% if(products[i-1].isAvailable ==1){ %>
                                                <tr>
                                                    <th scope="row">
                                                        <%= i %>
                                                    </th>
                                                    <td>
                                                        <%= products[i-1].name %>
                                                    </td>
                                                    <td>
                                                        <%= products[i-1].platform %>
                                                    </td>
                                                    <td>
                                                        <%= products[i-1].price %>
                                                    </td>
                                                    <td>
                                                        <%= products[i-1].rating %>
                                                    </td>
                                                    <td>
                                                        <%= products[i-1].genre %>
                                                        
                                                    </td>
                                                    <td>
                                                        <%= products[i-1].stock %>
                                                        
                                                    </td>
                                                    <td>
                                                        <% if(products[i-1].image) { %>
                                                            <img src="/assets/uploads/<%= products[i-1].image %>"
                                                                width="100vw" height="100vh">
                                                            <% }else{ %>
                                                                Image Not Found
                                                                <% } %>
                                                    </td>
                                                    <td>
                                                        <a class="text-success" href="/admin/edit-product?id=<%= products[i-1]._id %>"><i
                                                                style="color: green;"
                                                                class="m-r-5 mdi mdi-border-color"></i>Edit</a><br>
                                                        <!-- <a data-toggle="modal" style="color: red"; data-target="
                                                            #deleteModal" href=""><i
                                                                class=" m-r-5 mdi mdi-delete-forever"></i>Delete</a> -->
                                                        <a class="text-danger" href="/admin/delete-product?id=<%= products[i-1]._id %>"><i
                                                                style="color: #ff0000;"
                                                                class="m-r-5 mdi mdi-border-color"></i>Delete</a><br>
                                                    </td>
                                                
                                                <!-- model bootstrap -->
                                                <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog"
                                                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                    <div class="modal-dialog" role="document">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h5 class="modal-title" id="exampleModalLabel">Delete
                                                                    The Item ?</h5> <button type="button" class="close"
                                                                    data-dismiss="modal" aria-label="Close"> <span
                                                                        aria-hidden="true">Ã—</span> </button>
                                                            </div>
                                                            <div class="modal-body"> Are you sure you want to delete the
                                                                item : <strong>
                                                                   <p> <%= products[i-1].productName %> </p>
                                                                </strong> </div>
                                                            <div class="modal-footer"> <button type="button"
                                                                    class="btn btn-secondary"
                                                                    data-dismiss="modal">Close</button> <a 
                                                                    href="/admin/delete-product?id=<%= products[i-1]._id %>"
                                                                    type="button" class="btn btn-danger">Delete Item</a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </tr>
                                            <% } %>
                                                <% }} else { %>
                                                    <tr>
                                                        <td colspan="5">Products Not Found</td>
                                                    </tr>
                                                    <% } %>

                                    </tbody>
                                    <!-- <tfoot>
                                        <tr>
                                            <th scope="col">SI NO</th>
                                            <th scope="col">Game Name</th>
                                            <th scope="col">Platform</th>
                                            <th scope="col">Price</th>
                                            <th scope="col">Rating</th>
                                            <th scope="col">Genre</th>
                                            <th scope="col">Stock</th>
                                            <th scope="col">Image</th>
                                            <th scope="col">Actions</th>
                                        </tr>
                                    </tfoot> -->
                                </table>
                                <script>
                                    $(document).ready(function () {
                                    $('#products').DataTable();
                                    });    
                                </script>
                                
                            </div>
                        </div>
                    </div>
                </div>


                <!-- ============================================================== -->
                <!-- End PAge Content -->
                <!-- ============================================================== -->
                <!-- ============================================================== -->
                <!-- Right sidebar -->
                <!-- ============================================================== -->
                <!-- .right-sidebar -->
                <!-- ============================================================== -->
                <!-- End Right sidebar -->
                <!-- ============================================================== -->
            </div>
            <!-- ============================================================== -->
            <!-- End Container fluid  -->
            <!-- ============================================================== -->
            <!-- ============================================================== -->
            <!-- footer -->
            <!-- ============================================================== -->
            <footer class="footer text-center">
                All Rights Reserved by Xtreme Admin. Designed and Developed by <a
                    href="https://www.wrappixel.com">WrapPixel</a>.
            </footer>
            <!-- ============================================================== -->
            <!-- End footer -->
            <!-- ============================================================== -->
        </div>
        <!-- ============================================================== -->
        <!-- End Page wrapper  -->
        <!-- ============================================================== -->
        </div>
        <!-- ============================================================== -->
        <!-- End Wrapper -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- All Jquery -->
        <!-- ============================================================== -->
        <script src="assets/libs/jquery/dist/jquery.min.js"></script>
        <!-- Bootstrap tether Core JavaScript -->
        <script src="assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
        <script src="dist/js/app-style-switcher.js"></script>
        <!--Wave Effects -->
        <script src="dist/js/waves.js"></script>
        <!--Menu sidebar -->
        <script src="dist/js/sidebarmenu.js"></script>
        <!--Custom JavaScript -->
        <script src="dist/js/custom.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>
        </body>

        </html>